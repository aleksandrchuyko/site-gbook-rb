"use strict";(self.webpackChunksite_gbook=self.webpackChunksite_gbook||[]).push([[964],{7560:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var a,r=t(885),i=t(2791),s=t(3855),o=t(3360),u=t(9457),c=t(184),l=function(e){var n=e.onSubmit,t=(0,i.useState)(""),a=(0,r.Z)(t,2),l=a[0],d=a[1],m=(0,i.useState)(""),x=(0,r.Z)(m,2),f=x[0],p=x[1],h=function(e){switch(e.currentTarget.name){case"name":d(e.currentTarget.value);break;case"surname":p(e.currentTarget.value);break;default:return}};return(0,c.jsx)(u.Box,{children:(0,c.jsxs)(s.Z,{onSubmit:function(e){e.preventDefault(),n({name:l,surname:f}),d(""),p("")},children:[(0,c.jsxs)(s.Z.Group,{className:"mb-2",controlId:"formBasicName",children:[(0,c.jsx)(s.Z.Label,{children:"Name"}),(0,c.jsx)(s.Z.Control,{type:"text",name:"name",value:l,onChange:h,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0430-\u0457\u0491\u0404-\u042f\u0490]+(?:-[a-zA-Z\u0430-\u044f\u0410-\u042f\u0430-\u0457\u0491\u0404-\u042f\u0490]+)*$",title:"Name may contain only letters, apostrophe, dash and spaces.",autoComplete:"off",required:!0})]}),(0,c.jsxs)(s.Z.Group,{className:"mb-2",controlId:"formBasicSurname",children:[(0,c.jsx)(s.Z.Label,{children:"Surname"}),(0,c.jsx)(s.Z.Control,{type:"text",name:"surname",value:f,onChange:h,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0430-\u0457\u0491\u0404-\u042f\u0490]+(?:-[a-zA-Z\u0430-\u044f\u0410-\u042f\u0430-\u0457\u0491\u0404-\u042f\u0490]+)*$",autoComplete:"off",required:!0})]}),(0,c.jsx)(o.Z,{variant:"primary",type:"submit",children:"Add"})]})})},d=t(3313),m=function(e){var n=e.id,t=e.open,a=e.getVisitorById,i=(0,d.T6)(),s=(0,r.Z)(i,2),u=s[0],l=s[1].isLoading;return(0,c.jsxs)("div",{children:[(0,c.jsx)(o.Z,{variant:"outline-secondary",size:"sm",type:"button",onClick:function(){a(n),t()},children:"Edit"}),(0,c.jsx)(o.Z,{variant:"outline-secondary",size:"sm",type:"button",disabled:l,onClick:function(){u(n)},children:"Delete"})]})},x=(t(481),t(2002)),f=t(168),p=t(6444),h=t(7022),Z=(0,p.ZP)(h.Z)(a||(a=(0,f.Z)(["\n  padding: 0;\n  & table {\n    width: 100%;\n  }\n"]))),j=function(e){var n=e.visitors,t=e.open,a=e.getVisitorById,r=n.map((function(e){return{id:e._id,name:e.name,surname:e.surname,createdAt:new Date(e.createdAt).toLocaleString(),action:(0,c.jsx)(m,{id:e._id,open:t,getVisitorById:a})}}));return(0,c.jsx)(Z,{children:(0,c.jsx)(x.Z,{keyField:"id",data:r,columns:[{dataField:"id",text:"Visitor ID",hidden:!0},{dataField:"name",text:"Name",sort:!0},{dataField:"surname",text:"Surname",sort:!0},{dataField:"createdAt",text:"Date of visit",sort:!0},{dataField:"action",text:"Actions"}]})})},v=function(e){var n=e.name,t=e.onChange;return(0,c.jsx)(u.Box,{children:(0,c.jsx)(s.Z,{children:(0,c.jsxs)(s.Z.Group,{className:"mb-2",controlId:"formBasicName",children:[(0,c.jsx)(s.Z.Label,{children:"Filter by Name"}),(0,c.jsx)(s.Z.Control,{type:"text",name:"find",value:n,onChange:t})]})})})},b=t(7577),g=t(9140),y=function(e){var n=e.visitor,t=e.onSubmit,a=e.close,u=(0,i.useState)(n.name),l=(0,r.Z)(u,2),d=l[0],m=l[1],x=(0,i.useState)(n.surname),f=(0,r.Z)(x,2),p=f[0],h=f[1],Z=function(e){switch(e.currentTarget.name){case"name":m(e.currentTarget.value);break;case"surname":h(e.currentTarget.value);break;default:return}};return(0,c.jsx)(b.Z,{style:{height:"100%",width:"100%",position:"absolute",zIndex:1,backgroundColor:"#fff"},children:(0,c.jsx)(g.Z,{style:{padding:"20px"},children:(0,c.jsxs)(s.Z,{onSubmit:function(e){e.preventDefault(),t({id:n._id,name:d,surname:p}),m(""),h(""),a()},children:[(0,c.jsxs)(s.Z.Group,{className:"mb-2",controlId:"formBasicName",children:[(0,c.jsx)(s.Z.Label,{children:"Name"}),(0,c.jsx)(s.Z.Control,{type:"text",name:"name",value:d,onChange:Z,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0430-\u0457\u0491\u0404-\u042f\u0490]+(?:-[a-zA-Z\u0430-\u044f\u0410-\u042f\u0430-\u0457\u0491\u0404-\u042f\u0490]+)*$",title:"Name may contain only letters, apostrophe, dash and spaces.",autoComplete:"off",required:!0})]}),(0,c.jsxs)(s.Z.Group,{className:"mb-2",controlId:"formBasicSurname",children:[(0,c.jsx)(s.Z.Label,{children:"Surname"}),(0,c.jsx)(s.Z.Control,{type:"text",name:"surname",value:p,onChange:Z,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0430-\u0457\u0491\u0404-\u042f\u0490]+(?:-[a-zA-Z\u0430-\u044f\u0410-\u042f\u0430-\u0457\u0491\u0404-\u042f\u0490]+)*$",autoComplete:"off",required:!0})]}),(0,c.jsx)(o.Z,{variant:"primary",type:"submit",children:"Save"}),(0,c.jsx)(o.Z,{variant:"primary",style:{marginLeft:"30px"},type:"button",onClick:function(){a()},children:"Cancel"})]})})})},C=t(5048),S=t(9538),N=function(){var e=(0,C.I0)(),n=(0,i.useState)({}),t=(0,r.Z)(n,2),a=t[0],s=t[1],o=function(){var e=(0,i.useState)(!1),n=(0,r.Z)(e,2),t=n[0],a=n[1];return{isOpen:t,open:function(){return a(!0)},close:function(){return a(!1)},toggle:function(){return a((function(e){return!e}))}}}(),u=o.isOpen,m=o.open,x=o.close,f=(0,C.v9)(S.zK),p=(0,d.$0)("",{refetchOnMountOrArgChange:!0}),Z=p.data,N=p.isLoading,k=p.isSuccess,w=(0,d.tx)(),A=(0,r.Z)(w,1)[0],B=(0,d.CJ)(),I=(0,r.Z)(B,1)[0],z=f.trim()?Z.filter((function(e){return e.name.toLowerCase().includes(f.toLowerCase())})):Z;return(0,c.jsxs)(h.Z,{className:"mt-2",style:{position:"relative"},children:[u&&(0,c.jsx)(y,{visitors:Z,visitor:a,close:x,onSubmit:function(e){var n=e.id,t=e.name,a=e.surname,r=e.password;I({visitorId:n,name:t,surname:a,password:r})}}),!N&&k&&(0,c.jsxs)(b.Z,{children:[(0,c.jsx)(g.Z,{children:(0,c.jsxs)(g.Z.Body,{children:[(0,c.jsx)(g.Z.Title,{children:"New visitor"}),(0,c.jsx)(l,{visitors:Z,onSubmit:function(e){var n=e.name,t=e.surname,a=e.password;A({name:n,surname:t,password:a})}})]})}),(0,c.jsx)(g.Z,{children:(0,c.jsxs)(g.Z.Body,{children:[(0,c.jsx)(g.Z.Title,{children:"Visitor list"}),(0,c.jsx)(v,{name:f,onChange:function(n){e((0,S.Tv)(n.target.value))}}),(0,c.jsx)(j,{visitors:z,open:m,getVisitorById:function(e){s(Z.find((function(n){return n._id===e})))}})]})})]})]})}}}]);
//# sourceMappingURL=964.4c21cc9f.chunk.js.map